HPHP48-W,*∞
%PRG%%%%%%%%%%%%%%%%%%
%   ZELDA HP v0.2    %
%     by SunHP       %
%%%%%%%%%%%%%%%%%%%%%%

%%%%%% la je loade la
'TAB % tab e des mnem-
%%%%%% oniques ROM 48

%%%%%%% la je load les
'CSTE % constantes.
%%%%%%% 

GOSBVL [SAVREG]
'MDL
GOSBVL [INTOF2]
'INI

GOSUBL DISP_PRE
GOSUBL LAND_DISPER
GOSUBL GUID_DISPER
GOSUBL LANDçA
GOSUBL COPY_AçB
ST=0.10 % ?TALK
ST=1.11 % ROOM
ST=0.12 % UP
ST=1.13 % EC3-4
ST=0.9  % SPR 1/2
ST=0.8  % MENU_OFF

*LCD
GOSUBL ANIMATION
GOSUBL SAVE.SP
GOSUBL SPRITE
?ST=1.13 { GOSUBL COPY_AçB }
GOSUBL RCL.SP

GOSUBL TD GOSUBL TG
GOSUBL TH GOSUBL TB
%GOSUBL THD GOSUBL THG
%GOSUBL TBD GOSUBL TBG
GOSUBL T7 GOSUBL T9
%GOSUBL T[+/-]

LC 010 GOSBVL [INKEY] ?CBIT=1.0
{ GOLONG QUIT }

GOLONG LCD

%%%%%%%%%%%%%%%%%%%%%%
%   SOUS-PROGRAMMES  %
%%%%%%%%%%%%%%%%%%%%%%

'SPRIT % AF. ZELDA
'MISC  % WAIT,CONT,..
'LAND  % AF. LE MONDE
'SCROL % SCROLLINGS
'GUIDE % GUIDAGE
'DIAL  % DIALOGUES
'TXT   % TEXTES
'PRES  % PRESENTATION
'ANIM  % ANIMATIONS

%%%%%%%%%%%%%%%%%%%%%%

*QUIT
GOSUBL STOP.INT
GOSBVL 01C7F
GOSBVL [INTON2]
GOSBVL 00D57
%%% DROP DU LIBDAT %%%
GOSBVL [RCLREG]
GOSBVL [DROPSV]
GOVLNG [QUIT]

*MYINT
ST=0 15
GONC NO.CARRY
ST=1 15
*NO.CARRY
RSTK=C
CD0EX
D0= 00140
DAT0=C 16
C=0.X
CPEX.1
?SB=0
GOYES NO.SB
C=C+1.P
*NO.SB
C=C-1.XS
SETHEX
D0= 50
DAT0=C.3

D0= 2F
C=DAT0.B
?CBIT=0.3
GOYES FIN.INT

D0= 28
*WAIT.VBL
C=DAT0.B
C=C+C.B
C=C+C.B
?Cã0.B
GOYES WAIT.VBL

D0= 8E
?ST=0 14
GOYES 1ER.ECRAN
D0= 93

*1ER.ECRAN
C=DAT0.A

D0= 20
DAT0=C.A
D0= 38
C=0.W
LC 7D
?ST=0 14
GOYES PREMIER.ECRAN
LC FD
ST=0 14
GONC ECRIRE.HORLOGE
*PREMIER.ECRAN
ST=1 14
*ECRIRE.HORLOGE
DAT0=C.8

*FIN.INT

D0= 50
C=DAT0 3
C=C+1 XS
GOC HEX
SETDEC
*HEX
P=C 1
SB=0
CSRB.B
D0= 40
C=DAT0 16
D0=C
C=RSTK
?ST=1 15
GOYES CARRY
*CARRY
RTI

**INIT.INT
D0= 8000F
A=DAT0 16
D1= 80092
DAT1=A 16

P= 6
LC 10308108
P= 0
D1= A2
C=DAT1 A
D=C A
CSL W
CSL W
LC D8 DAT0=C 16
LC 40000 B=C.A
LC 154   RSTK=C
LC 1535  RSTK=C
LC 0004  RSTK=C
LC 1535  RSTK=C
LC 66B75 RSTK=C
LC 80000
GOVLNG 4049B


**STOP.INT
C=0.X
OUT=C
LC 10
D0= 0012E
DAT0=C.B

D0= 92
A=DAT0 16
D1= 0000F
DAT1=A 16

LC 0224F
RSTK=C
C=0.A
GOVLNG 4049B

@